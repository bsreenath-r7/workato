{
  "name": "Callable - Add Employee to capture deprovisioning logs",
  "description": "**Trigger**:  It is a callable recipe.\n\n**Description**: When an employee terms, multiple systems take action to remove access for that employee.  This is all kicked off by a Pub/Sub notification for termination_date_reached.it is added to a log in MySQL.\n\n**Actions**: It is adding/updating terminated employee logs inside workday_terminated_employees_status MySQL Table.",
  "version": 2,
  "private": true,
  "concurrency": 5,
  "code": {
    "number": 0,
    "provider": "workato_service",
    "name": "receive_request",
    "as": "ce51be61",
    "title": null,
    "description": "New <span class=\"provider\">call</span> for <span class=\"provider\">Callable - Add Employee to capture deprovisioning logs</span>",
    "keyword": "trigger",
    "dynamicPickListSelection": {
    },
    "toggleCfg": {
    },
    "input": {
      "service_name": "Callable - Add Employee to capture deprovisioning logs",
      "request_schema_json": "[{\"name\":\"workday_id\",\"type\":\"string\",\"optional\":false,\"control_type\":\"text\"},{\"name\":\"system\",\"type\":\"string\",\"optional\":false,\"control_type\":\"text\"},{\"name\":\"status\",\"type\":\"string\",\"optional\":false,\"control_type\":\"text\"},{\"name\":\"notes\",\"type\":\"string\",\"optional\":false,\"control_type\":\"text\"}]"
    },
    "extended_output_schema": [
      {
        "type": "object",
        "name": "request",
        "label": "Recipe input",
        "properties": [
          {
            "control_type": "text",
            "label": "Workday ID",
            "name": "workday_id",
            "type": "string",
            "optional": false
          },
          {
            "control_type": "text",
            "label": "System",
            "name": "system",
            "type": "string",
            "optional": false
          },
          {
            "control_type": "text",
            "label": "Status",
            "name": "status",
            "type": "string",
            "optional": false
          },
          {
            "control_type": "text",
            "label": "Notes",
            "name": "notes",
            "type": "string",
            "optional": false
          }
        ]
      }
    ],
    "block": [
      {
        "number": 1,
        "keyword": "try",
        "dynamicPickListSelection": {
        },
        "toggleCfg": {
        },
        "input": {
        },
        "block": [
          {
            "number": 2,
            "provider": "mysql",
            "name": "upsert_rows",
            "as": "a4b836df",
            "title": "Upsert row in workday_terminated_employees_status",
            "description": "Upsert <span class=\"provider\">row</span> in <span class=\"provider\">workday_terminated_employees_status</span> table in <span class=\"provider\">MySQL</span>",
            "keyword": "action",
            "dynamicPickListSelection": {
              "table": "workday_terminated_employees_status"
            },
            "toggleCfg": {
              "table": true
            },
            "input": {
              "table": "workday_terminated_employees_status",
              "columns": {
                "workday_id": "#{_('data.workato_service.ce51be61.request.workday_id')}",
                "system": "#{_('data.workato_service.ce51be61.request.system')}",
                "status": "#{_('data.workato_service.ce51be61.request.status')}",
                "notes": "#{_('data.workato_service.ce51be61.request.notes')}",
                "date_lastmodified_5151a09e": "=now"
              }
            },
            "extended_input_schema": [
              {
                "type": "object",
                "name": "columns",
                "label": "Columns",
                "properties": [
                  {
                    "control_type": "date_time",
                    "label": "date_lastModified",
                    "render_input": "convert_date_time",
                    "parse_output": "parse_time_value",
                    "details": {
                      "data_type": "timestamp(3)",
                      "column_name": "date_lastModified"
                    },
                    "optional": true,
                    "hint": "timestamp(3)",
                    "type": "date_time",
                    "name": "date_lastmodified_5151a09e"
                  },
                  {
                    "control_type": "text",
                    "label": "notes",
                    "details": {
                      "data_type": "varchar(500)",
                      "column_name": "notes"
                    },
                    "optional": true,
                    "hint": "varchar(500)",
                    "type": "string",
                    "name": "notes"
                  },
                  {
                    "control_type": "text",
                    "label": "solarwinds_link",
                    "details": {
                      "data_type": "varchar(255)",
                      "column_name": "solarwinds_link"
                    },
                    "optional": true,
                    "hint": "varchar(255)",
                    "type": "string",
                    "name": "solarwinds_link"
                  },
                  {
                    "control_type": "number",
                    "label": "solarwinds_number",
                    "parse_output": "parse_integer_output",
                    "details": {
                      "data_type": "int(11)",
                      "column_name": "solarwinds_number"
                    },
                    "render_input": "parse_integer_output",
                    "optional": true,
                    "hint": "int(11)",
                    "type": "integer",
                    "name": "solarwinds_number"
                  },
                  {
                    "control_type": "text",
                    "label": "status",
                    "details": {
                      "data_type": "varchar(45)",
                      "column_name": "status"
                    },
                    "hint": "varchar(45)",
                    "optional": true,
                    "type": "string",
                    "name": "status"
                  },
                  {
                    "control_type": "text",
                    "label": "system",
                    "details": {
                      "data_type": "varchar(45)",
                      "column_name": "system"
                    },
                    "event_title": true,
                    "optional": true,
                    "hint": "varchar(45), primary key",
                    "type": "string",
                    "name": "system"
                  },
                  {
                    "control_type": "number",
                    "label": "workday_id",
                    "parse_output": "parse_integer_output",
                    "details": {
                      "data_type": "int(11)",
                      "column_name": "workday_id"
                    },
                    "render_input": "parse_integer_output",
                    "event_title": true,
                    "optional": true,
                    "hint": "int(11), primary key",
                    "type": "integer",
                    "name": "workday_id"
                  }
                ]
              }
            ],
            "visible_config_fields": [
              "table",
              "columns.workday_id",
              "columns",
              "columns.status",
              "columns.system",
              "columns.notes",
              "columns.date_lastmodified_5151a09e"
            ],
            "comment": "Adding/updating the terminated employee logs inside the table.",
            "uuid": "1949758f-c101-41ff-bded-a6cb5f7dfde0"
          },
          {
            "number": 3,
            "as": "70efe3a7",
            "keyword": "catch",
            "dynamicPickListSelection": {
            },
            "toggleCfg": {
            },
            "input": {
              "max_retry_count": "2",
              "retry_interval": "2"
            },
            "block": [
              {
                "number": 4,
                "provider": "logger",
                "name": "log_message",
                "as": "4320a5e2",
                "title": null,
                "description": null,
                "keyword": "action",
                "dynamicPickListSelection": {
                },
                "toggleCfg": {
                },
                "input": {
                  "message": "#{_('data.catch.70efe3a7.message')}"
                },
                "uuid": "9f6d5b31-6233-4731-8be1-870bd69df7bf"
              }
            ],
            "uuid": "96ebcd8c-c44c-4733-af5f-cbaaf20e7cbb"
          }
        ],
        "uuid": "81d7fbc2-ef55-403e-b7f3-3a2606899c93"
      }
    ],
    "job_report_schema": [
      {
        "name": "custom_column_1",
        "label": "System"
      },
      {
        "name": "custom_column_2",
        "label": "Workday ID"
      },
      {
        "name": "custom_column_3",
        "label": "Status"
      },
      {
        "name": "custom_column_5",
        "label": "Error ?"
      }
    ],
    "job_report_config": {
      "custom_column_1": "#{_('data.workato_service.ce51be61.request.system')}",
      "custom_column_2": "#{_('data.workato_service.ce51be61.request.workday_id')}",
      "custom_column_3": "#{_('data.workato_service.ce51be61.request.status')}",
      "custom_column_5": "#{_('data.catch.70efe3a7.message')}"
    },
    "uuid": "cd3469b5-f294-4f86-a842-ac2ed7d8ed6e"
  },
  "config": [
    {
      "keyword": "application",
      "provider": "workato_service",
      "skip_validation": false,
      "account_id": null
    },
    {
      "keyword": "application",
      "provider": "mysql",
      "skip_validation": false,
      "account_id": {
        "zip_name": "resources/mysql.connection.json",
        "name": "MySQL",
        "folder": "resources"
      }
    },
    {
      "keyword": "application",
      "provider": "logger",
      "skip_validation": false,
      "account_id": null
    }
  ]
}