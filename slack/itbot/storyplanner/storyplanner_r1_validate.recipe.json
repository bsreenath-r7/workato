{
  "name": "storyplanner-R1-Validate",
  "description": "When there is a trigger event, do action",
  "version": 2,
  "private": true,
  "concurrency": 1,
  "code": {
    "number": 0,
    "provider": "slack_bot",
    "name": "bot_command_v2",
    "as": "486275a3",
    "title": null,
    "description": "New <span class=\"provider\">storyplanner accept size</span> command to <span class=\"provider\">Slack Workbot</span>",
    "keyword": "trigger",
    "dynamicPickListSelection": {
      "domain": "Slack",
      "event_name": "View Submission (view_submission)"
    },
    "toggleCfg": {
      "domain": false,
      "name": false,
      "scope": false
    },
    "input": {
      "allow_dialog": "false",
      "domain": "storyplanner",
      "name": "accept",
      "scope": "size",
      "description": "Accept story size from user",
      "hide_from_help": "true",
      "parameters": "[\n  {\n    \"control_type\": \"text\",\n    \"label\": \"Story\",\n    \"name\": \"story\",\n    \"type\": \"string\",\n    \"optional\": false\n  },\n  {\n    \"control_type\": \"text\",\n    \"label\": \"Size\",\n    \"name\": \"size\",\n    \"type\": \"string\",\n    \"optional\": false\n  }\n]"
    },
    "extended_output_schema": [
      {
        "type": "object",
        "name": "parameters",
        "label": "Parameters",
        "properties": [
          {
            "control_type": "text",
            "label": "Story",
            "name": "story",
            "type": "string",
            "optional": false
          },
          {
            "control_type": "text",
            "label": "Size",
            "name": "size",
            "type": "string",
            "optional": false
          }
        ]
      }
    ],
    "block": [
      {
        "number": 1,
        "provider": "lookup_table",
        "name": "search_entries",
        "as": "337de903",
        "title": null,
        "description": "\n      Search\n      <span class=\"provider\">entries</span>\n      in\n      <span class=\"provider\">STORY_PLANNER</span>\n      lookup table\n    ",
        "keyword": "action",
        "dynamicPickListSelection": {
          "lookup_table_id": "STORY_PLANNER"
        },
        "toggleCfg": {
        },
        "input": {
          "lookup_table_id": {
            "zip_name": "story_planner.lookup_table.json",
            "name": "STORY_PLANNER",
            "folder": ""
          },
          "parameters": {
            "col3": "@#{_('data.slack_bot.486275a3.context.user_handle')}",
            "col1": "#{_('data.slack_bot.486275a3.parameters.story')}"
          }
        },
        "extended_output_schema": [
          {
            "type": "array",
            "name": "entries",
            "label": "Entries",
            "of": "object",
            "properties": [
              {
                "control_type": "number",
                "label": "Entry ID",
                "parse_output": "integer_conversion",
                "type": "integer",
                "name": "id"
              },
              {
                "properties": [
                  {
                    "control_type": "text",
                    "label": "story",
                    "name": "col1",
                    "type": "string",
                    "sticky": true
                  },
                  {
                    "control_type": "text",
                    "label": "owner",
                    "name": "col2",
                    "type": "string",
                    "sticky": true
                  },
                  {
                    "control_type": "text",
                    "label": "voter",
                    "name": "col3",
                    "type": "string",
                    "sticky": true
                  },
                  {
                    "control_type": "text",
                    "label": "vote",
                    "name": "col4",
                    "type": "string",
                    "sticky": true
                  }
                ],
                "label": "Entry",
                "type": "object",
                "name": "entry"
              }
            ]
          }
        ],
        "extended_input_schema": [
          {
            "type": "object",
            "name": "parameters",
            "label": "Search by",
            "hint": "Provide one or more entry fields to search the entry",
            "properties": [
              {
                "control_type": "text",
                "label": "story",
                "name": "col1",
                "type": "string",
                "sticky": true,
                "optional": true
              },
              {
                "control_type": "text",
                "label": "owner",
                "name": "col2",
                "type": "string",
                "sticky": true,
                "optional": true
              },
              {
                "control_type": "text",
                "label": "voter",
                "name": "col3",
                "type": "string",
                "sticky": true,
                "optional": true
              },
              {
                "control_type": "text",
                "label": "vote",
                "name": "col4",
                "type": "string",
                "sticky": true,
                "optional": true
              }
            ]
          }
        ],
        "uuid": "e9bea8f5-45e9-49d1-930b-5032def4f777"
      },
      {
        "number": 2,
        "keyword": "if",
        "dynamicPickListSelection": {
        },
        "toggleCfg": {
        },
        "input": {
          "type": "compound",
          "operand": "and",
          "conditions": [
            {
              "operand": "blank",
              "lhs": "#{_('data.lookup_table.337de903.entries.first.id')}",
              "rhs": null
            }
          ]
        },
        "block": [
          {
            "number": 3,
            "provider": "lookup_table",
            "name": "add_entry",
            "as": "1e25d9b2",
            "title": null,
            "description": "\n      Add\n      <span class=\"provider\">entry</span>\n      to\n      <span class=\"provider\">STORY_PLANNER</span>\n      lookup table\n    ",
            "keyword": "action",
            "dynamicPickListSelection": {
              "lookup_table_id": "STORY_PLANNER"
            },
            "toggleCfg": {
            },
            "input": {
              "lookup_table_id": {
                "zip_name": "story_planner.lookup_table.json",
                "name": "STORY_PLANNER",
                "folder": ""
              },
              "parameters": {
                "col3": "@#{_('data.slack_bot.486275a3.context.user_handle')}",
                "col4": "#{_('data.slack_bot.486275a3.parameters.size')}",
                "col1": "#{_('data.slack_bot.486275a3.parameters.story')}"
              }
            },
            "extended_output_schema": [
              {
                "type": "integer",
                "name": "id",
                "control_type": "number",
                "label": "Entry ID",
                "parse_output": "integer_conversion"
              },
              {
                "type": "object",
                "name": "entry",
                "label": "Entry",
                "properties": [
                  {
                    "control_type": "text",
                    "label": "story",
                    "name": "col1",
                    "type": "string",
                    "sticky": true
                  },
                  {
                    "control_type": "text",
                    "label": "owner",
                    "name": "col2",
                    "type": "string",
                    "sticky": true
                  },
                  {
                    "control_type": "text",
                    "label": "voter",
                    "name": "col3",
                    "type": "string",
                    "sticky": true
                  },
                  {
                    "control_type": "text",
                    "label": "vote",
                    "name": "col4",
                    "type": "string",
                    "sticky": true
                  }
                ]
              }
            ],
            "extended_input_schema": [
              {
                "type": "object",
                "name": "parameters",
                "label": "Entry fields",
                "hint": "Fill the fields for the new entry",
                "properties": [
                  {
                    "control_type": "text",
                    "label": "story",
                    "name": "col1",
                    "type": "string",
                    "sticky": true,
                    "optional": true
                  },
                  {
                    "control_type": "text",
                    "label": "owner",
                    "name": "col2",
                    "type": "string",
                    "sticky": true,
                    "optional": true
                  },
                  {
                    "control_type": "text",
                    "label": "voter",
                    "name": "col3",
                    "type": "string",
                    "sticky": true,
                    "optional": true
                  },
                  {
                    "control_type": "text",
                    "label": "vote",
                    "name": "col4",
                    "type": "string",
                    "sticky": true,
                    "optional": true
                  }
                ]
              }
            ],
            "uuid": "61f4137d-b1f0-4e60-972f-6491ed3c3dee"
          },
          {
            "number": 4,
            "keyword": "else",
            "dynamicPickListSelection": {
            },
            "toggleCfg": {
            },
            "input": {
            },
            "block": [
              {
                "number": 5,
                "provider": "lookup_table",
                "name": "update_entry",
                "as": "5ee1ada2",
                "title": null,
                "description": "\n      Update\n      <span class=\"provider\">entry</span>\n      in\n      <span class=\"provider\">STORY_PLANNER</span>\n      lookup table\n    ",
                "keyword": "action",
                "dynamicPickListSelection": {
                  "lookup_table_id": "STORY_PLANNER"
                },
                "toggleCfg": {
                  "ignore_not_found": true
                },
                "input": {
                  "ignore_not_found": "true",
                  "lookup_table_id": {
                    "zip_name": "story_planner.lookup_table.json",
                    "name": "STORY_PLANNER",
                    "folder": ""
                  },
                  "id": "#{_('data.lookup_table.337de903.entries.first.id')}",
                  "parameters": {
                    "col3": "@#{_('data.slack_bot.486275a3.context.user_handle')}",
                    "col4": "#{_('data.slack_bot.486275a3.parameters.size')}",
                    "col1": "#{_('data.slack_bot.486275a3.parameters.story')}"
                  }
                },
                "extended_output_schema": [
                  {
                    "type": "integer",
                    "name": "id",
                    "control_type": "number",
                    "label": "Entry ID",
                    "parse_output": "integer_conversion"
                  },
                  {
                    "type": "object",
                    "name": "entry",
                    "label": "Entry",
                    "properties": [
                      {
                        "control_type": "text",
                        "label": "story",
                        "name": "col1",
                        "type": "string",
                        "sticky": true
                      },
                      {
                        "control_type": "text",
                        "label": "owner",
                        "name": "col2",
                        "type": "string",
                        "sticky": true
                      },
                      {
                        "control_type": "text",
                        "label": "voter",
                        "name": "col3",
                        "type": "string",
                        "sticky": true
                      },
                      {
                        "control_type": "text",
                        "label": "vote",
                        "name": "col4",
                        "type": "string",
                        "sticky": true
                      }
                    ]
                  }
                ],
                "extended_input_schema": [
                  {
                    "type": "object",
                    "name": "parameters",
                    "label": "Entry fields",
                    "hint": "Fill the fields you want to update",
                    "properties": [
                      {
                        "control_type": "text",
                        "label": "story",
                        "name": "col1",
                        "type": "string",
                        "sticky": true,
                        "optional": true
                      },
                      {
                        "control_type": "text",
                        "label": "owner",
                        "name": "col2",
                        "type": "string",
                        "sticky": true,
                        "optional": true
                      },
                      {
                        "control_type": "text",
                        "label": "voter",
                        "name": "col3",
                        "type": "string",
                        "sticky": true,
                        "optional": true
                      },
                      {
                        "control_type": "text",
                        "label": "vote",
                        "name": "col4",
                        "type": "string",
                        "sticky": true,
                        "optional": true
                      }
                    ]
                  }
                ],
                "uuid": "5e3adca7-0d42-4273-922f-ad5d0dcab534"
              }
            ],
            "uuid": "5b6b0a0a-2814-440b-b158-234546891189"
          }
        ],
        "uuid": "a1f87c3a-cfda-4d6a-bba3-c67786a7bda0"
      },
      {
        "number": 6,
        "provider": "workato_service",
        "name": "call_service_async",
        "as": "330c68bf",
        "title": null,
        "description": "Call recipe <span class=\"provider\">storyplanner-Rx-Callable-BlockPoster</span> (do not wait for response)",
        "keyword": "action",
        "dynamicPickListSelection": {
          "flow_id": "storyPlanner-Rx-Callable-BlockPoster"
        },
        "toggleCfg": {
        },
        "input": {
          "flow_id": {
            "zip_name": "slack/itbot/storyplanner/storyplanner_rx_callable_blockposter.recipe.json",
            "name": "storyplanner-Rx-Callable-BlockPoster",
            "folder": "slack/itbot/storyplanner"
          },
          "request": {
            "messageId": "#{_('data.slack_bot.486275a3.ts')}",
            "userHandle": "#{_('data.slack_bot.486275a3.context.user_handle')}",
            "channelOrDM": "#{_('data.slack_bot.486275a3.context.channel')}",
            "title": "#{_('data.slack_bot.486275a3.parameters.story')}",
            "buttonType": "size"
          }
        },
        "extended_input_schema": [
          {
            "type": "object",
            "name": "request",
            "label": "Recipe input",
            "properties": [
              {
                "control_type": "text",
                "label": "Title",
                "name": "title",
                "type": "string",
                "optional": false
              },
              {
                "control_type": "text",
                "label": "Channel or DM",
                "name": "channelOrDM",
                "type": "string",
                "optional": false
              },
              {
                "control_type": "text",
                "label": "Message ID",
                "name": "messageId",
                "type": "string",
                "optional": false
              },
              {
                "control_type": "text",
                "label": "User handle",
                "name": "userHandle",
                "type": "string",
                "optional": true
              },
              {
                "control_type": "text",
                "label": "Button type",
                "name": "buttonType",
                "type": "string",
                "optional": false
              }
            ]
          }
        ],
        "uuid": "ad7db6b3-91bf-4e2c-b66a-1176af7ac41e"
      }
    ],
    "job_report_schema": [
      {
        "name": "custom_column_1",
        "label": "story"
      },
      {
        "name": "custom_column_3",
        "label": "user"
      },
      {
        "name": "custom_column_2",
        "label": "size"
      },
      {
        "name": "custom_column_4",
        "label": "messageId"
      }
    ],
    "job_report_config": {
      "custom_column_1": "#{_('data.slack_bot.486275a3.parameters.story')}",
      "custom_column_3": "@#{_('data.slack_bot.486275a3.context.user_handle')}",
      "custom_column_2": "#{_('data.slack_bot.486275a3.parameters.size')}",
      "custom_column_4": "#{_('data.slack_bot.486275a3.ts')}"
    },
    "uuid": "c5fc9a31-e6a8-4ee4-97c9-041af6d77fd3"
  },
  "config": [
    {
      "keyword": "application",
      "provider": "slack_bot",
      "skip_validation": false,
      "account_id": {
        "zip_name": "DEVOPS-644 | ITBot/itbot.connection.json",
        "name": "ITBot",
        "folder": "DEVOPS-644 | ITBot"
      }
    },
    {
      "keyword": "application",
      "provider": "lookup_table",
      "skip_validation": false,
      "account_id": null
    },
    {
      "keyword": "application",
      "provider": "workato_service",
      "skip_validation": false,
      "account_id": null
    }
  ]
}