{
  "name": "storyplanner-R2-Reveal",
  "description": "When there is a trigger event, do action",
  "version": 2,
  "private": true,
  "concurrency": 1,
  "code": {
    "number": 0,
    "provider": "slack_bot",
    "name": "bot_command_v2",
    "as": "486275a3",
    "title": null,
    "description": "New <span class=\"provider\">storyplanner accept reveal</span> command to <span class=\"provider\">Slack Workbot</span>",
    "keyword": "trigger",
    "dynamicPickListSelection": {
      "domain": "Slack",
      "event_name": "View Submission (view_submission)"
    },
    "toggleCfg": {
      "domain": false,
      "name": false,
      "scope": false
    },
    "input": {
      "allow_dialog": "false",
      "domain": "storyplanner",
      "name": "accept",
      "scope": "reveal",
      "description": "Story marked as Done!",
      "hide_from_help": "true",
      "parameters": "[\n  {\n    \"control_type\": \"story\",\n    \"label\": \"Story\",\n    \"name\": \"story\",\n    \"type\": \"string\",\n    \"optional\": false\n  }\n]"
    },
    "extended_output_schema": [
      {
        "type": "object",
        "name": "parameters",
        "label": "Parameters",
        "properties": [
          {
            "control_type": "story",
            "label": "Story",
            "name": "story",
            "type": "string",
            "optional": false
          }
        ]
      }
    ],
    "block": [
      {
        "number": 1,
        "provider": "lookup_table",
        "name": "search_entries",
        "as": "dabc3267",
        "title": null,
        "description": "\n      Search\n      <span class=\"provider\">entries</span>\n      in\n      <span class=\"provider\">STORY_PLANNER</span>\n      lookup table\n    ",
        "keyword": "action",
        "dynamicPickListSelection": {
          "lookup_table_id": "STORY_PLANNER"
        },
        "toggleCfg": {
        },
        "input": {
          "lookup_table_id": {
            "zip_name": "story_planner.lookup_table.json",
            "name": "STORY_PLANNER",
            "folder": ""
          },
          "parameters": {
            "col1": "#{_('data.slack_bot.486275a3.parameters.story')}",
            "col2": "@#{_('data.slack_bot.486275a3.context.user_handle')}"
          }
        },
        "extended_output_schema": [
          {
            "type": "array",
            "name": "entries",
            "label": "Entries",
            "of": "object",
            "properties": [
              {
                "control_type": "number",
                "label": "Entry ID",
                "parse_output": "integer_conversion",
                "type": "integer",
                "name": "id"
              },
              {
                "properties": [
                  {
                    "control_type": "text",
                    "label": "story",
                    "name": "col1",
                    "type": "string",
                    "sticky": true
                  },
                  {
                    "control_type": "text",
                    "label": "owner",
                    "name": "col2",
                    "type": "string",
                    "sticky": true
                  },
                  {
                    "control_type": "text",
                    "label": "voter",
                    "name": "col3",
                    "type": "string",
                    "sticky": true
                  },
                  {
                    "control_type": "text",
                    "label": "vote",
                    "name": "col4",
                    "type": "string",
                    "sticky": true
                  }
                ],
                "label": "Entry",
                "type": "object",
                "name": "entry"
              }
            ]
          }
        ],
        "extended_input_schema": [
          {
            "type": "object",
            "name": "parameters",
            "label": "Search by",
            "hint": "Provide one or more entry fields to search the entry",
            "properties": [
              {
                "control_type": "text",
                "label": "story",
                "name": "col1",
                "type": "string",
                "sticky": true,
                "optional": true
              },
              {
                "control_type": "text",
                "label": "owner",
                "name": "col2",
                "type": "string",
                "sticky": true,
                "optional": true
              },
              {
                "control_type": "text",
                "label": "voter",
                "name": "col3",
                "type": "string",
                "sticky": true,
                "optional": true
              },
              {
                "control_type": "text",
                "label": "vote",
                "name": "col4",
                "type": "string",
                "sticky": true,
                "optional": true
              }
            ]
          }
        ],
        "uuid": "c86f2b45-680a-4d50-b9d2-1484d78d96c8"
      },
      {
        "number": 2,
        "keyword": "if",
        "dynamicPickListSelection": {
        },
        "toggleCfg": {
        },
        "input": {
          "type": "compound",
          "operand": "and",
          "conditions": [
            {
              "operand": "equals_to",
              "lhs": "#{_('data.lookup_table.dabc3267.entries.first.____Size', 'list_meta', '____Size', 'data.lookup_table.dabc3267.entries')}",
              "rhs": "0"
            }
          ]
        },
        "block": [
          {
            "number": 3,
            "keyword": "stop",
            "dynamicPickListSelection": {
            },
            "toggleCfg": {
            },
            "input": {
              "stop_with_error": "false"
            },
            "uuid": "e12baac2-045b-47e7-9b7d-048a543145a8"
          }
        ],
        "uuid": "c530f246-58d3-454f-b84f-6a4f9a978e70"
      },
      {
        "number": 4,
        "provider": "workato_service",
        "name": "call_service",
        "as": "576a938d",
        "title": null,
        "description": "Call recipe <span class=\"provider\">storyplanner-Rx-Callable-BlockPoster</span> ",
        "keyword": "action",
        "dynamicPickListSelection": {
          "flow_id": "storyPlanner-Rx-Callable-BlockPoster"
        },
        "toggleCfg": {
        },
        "input": {
          "flow_id": {
            "zip_name": "slack/itbot/storyplanner/storyplanner_rx_callable_blockposter.recipe.json",
            "name": "storyplanner-Rx-Callable-BlockPoster",
            "folder": "slack/itbot/storyplanner"
          },
          "request": {
            "title": "#{_('data.slack_bot.486275a3.parameters.story')}",
            "channelOrDM": "#{_('data.slack_bot.486275a3.context.channel')}",
            "messageId": "#{_('data.slack_bot.486275a3.ts')}",
            "buttonType": "reveal",
            "userHandle": "#{_('data.slack_bot.486275a3.context.user_handle')}"
          }
        },
        "extended_input_schema": [
          {
            "type": "object",
            "name": "request",
            "label": "Recipe input",
            "properties": [
              {
                "control_type": "text",
                "label": "Title",
                "name": "title",
                "type": "string",
                "optional": false
              },
              {
                "control_type": "text",
                "label": "Channel or DM",
                "name": "channelOrDM",
                "type": "string",
                "optional": false
              },
              {
                "control_type": "text",
                "label": "Message ID",
                "name": "messageId",
                "type": "string",
                "optional": false
              },
              {
                "control_type": "text",
                "label": "User handle",
                "name": "userHandle",
                "type": "string",
                "optional": true
              },
              {
                "control_type": "text",
                "label": "Button type",
                "name": "buttonType",
                "type": "string",
                "optional": false
              }
            ]
          }
        ],
        "uuid": "332ce4be-eede-4f53-ad15-b3ff801d45c9"
      }
    ],
    "job_report_schema": [
      {
        "name": "custom_column_4",
        "label": "story"
      },
      {
        "name": "custom_column_2",
        "label": "messageId"
      },
      {
        "name": "custom_column_3",
        "label": "user"
      }
    ],
    "job_report_config": {
      "custom_column_4": "#{_('data.slack_bot.486275a3.parameters.story')}",
      "custom_column_2": "#{_('data.slack_bot.486275a3.ts')}",
      "custom_column_3": "#{_('data.slack_bot.486275a3.context.user_handle')}"
    },
    "uuid": "c5fc9a31-e6a8-4ee4-97c9-041af6d77fd3"
  },
  "config": [
    {
      "keyword": "application",
      "provider": "slack_bot",
      "skip_validation": false,
      "account_id": {
        "zip_name": "DEVOPS-644 | ITBot/itbot.connection.json",
        "name": "ITBot",
        "folder": "DEVOPS-644 | ITBot"
      }
    },
    {
      "keyword": "application",
      "provider": "workato_service",
      "skip_validation": false,
      "account_id": null
    },
    {
      "keyword": "application",
      "provider": "lookup_table",
      "skip_validation": false,
      "account_id": null
    }
  ]
}