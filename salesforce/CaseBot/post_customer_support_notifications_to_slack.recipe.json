{
  "name": "Post Customer support notifications to Slack",
  "description": "When there is a new call for callable recipe, make request via HTTP and other actions",
  "version": 23,
  "private": true,
  "concurrency": 1,
  "code": {
    "number": 0,
    "provider": "workato_service",
    "name": "receive_request",
    "as": "receive_request",
    "title": null,
    "description": "New <span class=\"provider\">call</span> for <span class=\"provider\">POST_SLACK_MESSAGE</span>",
    "keyword": "trigger",
    "dynamicPickListSelection": {
    },
    "toggleCfg": {
      "rest_enabled": true
    },
    "input": {
      "service_name": "POST_SLACK_MESSAGE",
      "request_schema_json": "[{\"name\":\"channel\",\"type\":\"string\",\"control_type\":\"text\"},{\"name\":\"text\",\"type\":\"string\",\"control_type\":\"text\"}]",
      "reply_schema_json": "[{\"name\":\"response\",\"type\":\"string\",\"control_type\":\"text\"}]"
    },
    "extended_output_schema": [
      {
        "type": "object",
        "name": "request",
        "label": "Recipe input",
        "properties": [
          {
            "control_type": "text",
            "label": "Channel",
            "name": "channel",
            "type": "string"
          },
          {
            "control_type": "text",
            "label": "Text",
            "name": "text",
            "type": "string"
          }
        ]
      }
    ],
    "block": [
      {
        "number": 1,
        "keyword": "try",
        "dynamicPickListSelection": {
        },
        "toggleCfg": {
        },
        "input": {
        },
        "block": [
          {
            "number": 2,
            "provider": "rest",
            "name": "make_request",
            "as": "make_request",
            "title": null,
            "description": "<span class=\"provider\">Send_slack_message</span> via <span class=\"provider\">HTTP</span>",
            "keyword": "action",
            "dynamicPickListSelection": {
            },
            "toggleCfg": {
              "expected_encoding": false
            },
            "input": {
              "method": "POST",
              "expected_encoding": "UTF-8",
              "output_type": "json",
              "request_name": "SEND_SLACK_MESSAGE",
              "url": "https://slack.com/api/chat.postMessage",
              "headers": "Content-Type: application/json\nAuthorization: Bearer #{_('data.workato.job_context.account_properties.SlackProductionKey', 'account_property', 'SlackProductionKey')}",
              "body": "{\n\t\"channel\":\"@#{_('data.workato_service.receive_request.request.channel')}\",\n    \"as_user\" : true,\n\t\"attachments\": #{_('data.workato_service.receive_request.request.text')}\n}"
            },
            "extended_input_schema": [
              {
                "type": "string",
                "name": "sample_output",
                "control_type": "text-area",
                "label": "Response body example",
                "hint": "A sample schema structure of the response returned by the API call (in the response type format selected above). This is used to generate the output datatree for field mapping in subsequent steps. <a href='https://support.workato.com/support/solutions/articles/1000240698-http-rest-request-action-response-body-example' target='_blank'>Learn more</a>",
                "sticky": true,
                "optional": true,
                "extends_schema": true,
                "change_on_blur": true
              }
            ],
            "visible_config_fields": [
              "request_name",
              "method",
              "body",
              "expected_encoding",
              "output_type",
              "headers_schema",
              "sample_output",
              "headers",
              "url"
            ],
            "uuid": "58b5547b-6ce6-4ec3-a2e3-271dfa98c6ce"
          },
          {
            "number": 3,
            "as": "catch",
            "keyword": "catch",
            "dynamicPickListSelection": {
            },
            "toggleCfg": {
            },
            "input": {
              "max_retry_count": "3",
              "retry_interval": "5"
            },
            "block": [
              {
                "number": 4,
                "provider": "logger",
                "name": "log_message",
                "as": "log_message",
                "title": null,
                "description": null,
                "keyword": "action",
                "dynamicPickListSelection": {
                },
                "toggleCfg": {
                },
                "input": {
                  "message": "#{_('data.catch.catch.message')}"
                },
                "uuid": "6f148c40-722a-42c2-a06d-a1dcefe3a1d7"
              }
            ],
            "uuid": "88086898-3dd1-450d-84b5-747b96c6c215"
          }
        ],
        "uuid": "c4d797a7-d1b2-48e8-b14f-609f2b34de67"
      },
      {
        "number": 5,
        "keyword": "stop",
        "dynamicPickListSelection": {
        },
        "toggleCfg": {
        },
        "input": {
          "stop_with_error": "false"
        },
        "uuid": "cb66116e-dc8a-4680-9fbb-6ccf507620da"
      }
    ],
    "uuid": "6d07a52b-3f11-400a-96cc-faf3602c3ecb"
  },
  "config": [
    {
      "keyword": "application",
      "provider": "workato_service",
      "account_id": null
    },
    {
      "keyword": "application",
      "provider": "rest",
      "account_id": {
        "zip_name": "resources/case_notifications_slack.connection.json",
        "name": "Case Notifications - Slack",
        "folder": "resources"
      }
    },
    {
      "keyword": "application",
      "provider": "logger",
      "account_id": null
    }
  ]
}