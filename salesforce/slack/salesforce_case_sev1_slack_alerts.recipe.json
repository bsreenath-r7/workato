{
  "name": "Salesforce Case Sev1 - Slack Alerts",
  "description": "When there is a new/updated record in Salesforce, log message to output",
  "version": 30,
  "private": true,
  "concurrency": 5,
  "code": {
    "number": 0,
    "provider": "salesforce",
    "name": "new_custom_object",
    "as": "599982ea",
    "title": "New Case",
    "description": "New <span class=\"provider\">Case</span> in <span class=\"provider\">Salesforce</span>",
    "keyword": "trigger",
    "dynamicPickListSelection": {
      "sobject_name": "Case",
      "field_list": [
        {
          "label": "Case ID",
          "value": "Id"
        },
        {
          "label": "Case number",
          "value": "CaseNumber"
        },
        {
          "label": "Subject",
          "value": "Subject"
        },
        {
          "label": "Description",
          "value": "Description"
        },
        {
          "label": "Severity",
          "value": "Priority"
        },
        {
          "label": "Product",
          "value": "Product__c"
        },
        {
          "label": "Status",
          "value": "Status"
        },
        {
          "label": "Owner ID",
          "value": "OwnerId"
        },
        {
          "label": "Case owner",
          "value": "CaseOwner__c"
        }
      ]
    },
    "toggleCfg": {
    },
    "input": {
      "sobject_name": "Case",
      "since_offset": "-3600",
      "field_list": "Id\nCaseNumber\nSubject\nDescription\nPriority\nProduct__c\nStatus\nOwnerId\nCaseOwner__c"
    },
    "filter": {
      "conditions": [
        {
          "operand": "equals_to",
          "lhs": "#{_('data.salesforce.599982ea.Priority')}",
          "rhs": "1 - Mission Critical"
        },
        {
          "operand": "equals_to",
          "lhs": "#{_('data.salesforce.599982ea.Status')}",
          "rhs": "New"
        }
      ],
      "operand": "and",
      "type": "compound"
    },
    "extended_output_schema": [
      {
        "type": "string",
        "name": "Id",
        "control_type": "text",
        "label": "Case ID",
        "optional": true,
        "custom": false,
        "key_scope": "Case",
        "sfdc_createable": false,
        "sfdc_updateable": false
      },
      {
        "type": "string",
        "name": "CaseNumber",
        "control_type": "text",
        "label": "Case Number",
        "optional": true,
        "custom": false,
        "sfdc_createable": false,
        "sfdc_updateable": false
      },
      {
        "type": "date_time",
        "name": "CreatedDate",
        "control_type": "date_time",
        "label": "Created Date",
        "optional": true,
        "custom": false,
        "render_input": "render_iso8601_timestamp",
        "parse_output": "parse_iso8601_timestamp",
        "sfdc_createable": true,
        "sfdc_updateable": false
      },
      {
        "type": "string",
        "name": "Description",
        "control_type": "text-area",
        "label": "Description",
        "optional": true,
        "custom": false,
        "sfdc_createable": true,
        "sfdc_updateable": true
      },
      {
        "type": "date_time",
        "name": "LastModifiedDate",
        "control_type": "date_time",
        "label": "Last Modified Date",
        "optional": true,
        "custom": false,
        "render_input": "render_iso8601_timestamp",
        "parse_output": "parse_iso8601_timestamp",
        "sfdc_createable": true,
        "sfdc_updateable": false
      },
      {
        "type": "string",
        "name": "OwnerId",
        "control_type": "text",
        "label": "Owner ID",
        "optional": true,
        "custom": false,
        "sfdc_createable": true,
        "sfdc_updateable": true
      },
      {
        "type": "string",
        "name": "Priority",
        "control_type": "select",
        "label": "Severity",
        "pick_list": "sobject_field_values_list",
        "pick_list_params": {
          "sobject_name": "\"Case\""
        },
        "optional": true,
        "custom": false,
        "toggle_hint": "Select from list",
        "toggle_field": {
          "control_type": "text",
          "label": "Severity",
          "toggle_hint": "Enter custom value",
          "optional": true,
          "custom": false,
          "sfdc_createable": true,
          "sfdc_updateable": true,
          "type": "string",
          "name": "Priority"
        },
        "sfdc_createable": true,
        "sfdc_updateable": true
      },
      {
        "type": "string",
        "name": "Status",
        "control_type": "select",
        "label": "Status",
        "pick_list": "sobject_field_values_list",
        "pick_list_params": {
          "sobject_name": "\"Case\""
        },
        "optional": true,
        "custom": false,
        "toggle_hint": "Select from list",
        "toggle_field": {
          "control_type": "text",
          "label": "Status",
          "toggle_hint": "Enter custom value",
          "optional": true,
          "custom": false,
          "sfdc_createable": true,
          "sfdc_updateable": true,
          "type": "string",
          "name": "Status"
        },
        "sfdc_createable": true,
        "sfdc_updateable": true
      },
      {
        "type": "string",
        "name": "Subject",
        "control_type": "text",
        "label": "Subject",
        "optional": true,
        "custom": false,
        "sfdc_createable": true,
        "sfdc_updateable": true
      },
      {
        "type": "date_time",
        "name": "SystemModstamp",
        "control_type": "date_time",
        "label": "System Modstamp",
        "optional": true,
        "custom": false,
        "render_input": "render_iso8601_timestamp",
        "parse_output": "parse_iso8601_timestamp",
        "sfdc_createable": false,
        "sfdc_updateable": false
      },
      {
        "type": "string",
        "name": "CaseOwner__c",
        "control_type": "text",
        "label": "Case Owner",
        "optional": true,
        "custom": true,
        "sfdc_createable": false,
        "sfdc_updateable": false
      },
      {
        "type": "string",
        "name": "Product__c",
        "control_type": "select",
        "label": "Product",
        "pick_list": "sobject_field_values_list",
        "pick_list_params": {
          "sobject_name": "\"Case\""
        },
        "optional": true,
        "custom": true,
        "toggle_hint": "Select from list",
        "toggle_field": {
          "control_type": "text",
          "label": "Product",
          "toggle_hint": "Enter custom value",
          "optional": true,
          "custom": true,
          "sfdc_createable": true,
          "sfdc_updateable": true,
          "type": "string",
          "name": "Product__c"
        },
        "sfdc_createable": true,
        "sfdc_updateable": true
      },
      {
        "type": "object",
        "name": "CombinedAttachments",
        "label": "Combined attachments",
        "properties": [
          {
            "control_type": "number",
            "label": "Total size",
            "parse_output": "integer_conversion",
            "type": "integer",
            "name": "totalSize"
          },
          {
            "name": "records",
            "type": "array",
            "of": "object",
            "label": "Files",
            "properties": [
              {
                "control_type": "text",
                "label": "ID",
                "type": "string",
                "name": "Id"
              },
              {
                "control_type": "number",
                "label": "Content size",
                "parse_output": "integer_conversion",
                "type": "integer",
                "name": "ContentSize"
              },
              {
                "control_type": "url",
                "label": "Content URL",
                "type": "string",
                "name": "ContentUrl"
              },
              {
                "control_type": "text",
                "label": "File extension",
                "type": "string",
                "name": "FileExtension"
              },
              {
                "control_type": "text",
                "label": "File type",
                "type": "string",
                "name": "FileType"
              },
              {
                "control_type": "text",
                "label": "Parent ID",
                "type": "string",
                "name": "ParentId"
              },
              {
                "control_type": "text",
                "label": "Record type",
                "type": "string",
                "name": "RecordType"
              },
              {
                "control_type": "text",
                "label": "Title",
                "type": "string",
                "name": "Title"
              }
            ]
          }
        ],
        "sfdc_field_type": "CombinedAttachment"
      }
    ],
    "extended_input_schema": [
      {
        "type": "string",
        "name": "since_offset",
        "control_type": "select",
        "label": "When first started, this recipe should pick up events from",
        "hint": "When starting the recipe for the first time, picks up Salesforce records from the specified date and time. <b>Once the recipe has been run or tested, this value cannot be changed.</b>",
        "default": -3600,
        "pick_list": [
          [
            "Recipe start",
            0
          ],
          [
            "An hour ago",
            -3600
          ],
          [
            "Yesterday",
            -86400
          ],
          [
            "Last week",
            -604800
          ],
          [
            "Last month",
            -2629746
          ],
          [
            "Beginning of time",
            "no_limit"
          ]
        ],
        "toggle_hint": "Select from list",
        "toggle_field": {
          "control_type": "date_time",
          "label": "When first started, this recipe should pick up events from",
          "render_input": "convert_date_time",
          "parse_output": "convert_date_time",
          "toggle_hint": "Enter custom value",
          "since_field": true,
          "hint": "When starting the recipe for the first time, picks up Salesforce records from the specified date and time. <b>Once the recipe has been run or tested, this value cannot be changed.</b>",
          "type": "date_time",
          "name": "since"
        },
        "since_field": true
      }
    ],
    "block": [
      {
        "number": 1,
        "keyword": "if",
        "dynamicPickListSelection": {
        },
        "toggleCfg": {
        },
        "input": {
          "type": "compound",
          "operand": "or",
          "conditions": [
            {
              "operand": "contains",
              "lhs": "=lookup(\"SALESFORCE_VARIABLES\", key: \"case.sev1.products\")[\"value\"].split(\";\")[0]",
              "rhs": "#{_('data.salesforce.599982ea.Product__c')}"
            }
          ]
        },
        "block": [
          {
            "number": 2,
            "provider": "workato_service",
            "name": "call_service_async",
            "as": "eab0a5bb",
            "title": null,
            "description": "Call recipe <span class=\"provider\">Callable - Slack Alerts For Salesforce Sev1 Cases</span> (do not wait for response)",
            "keyword": "action",
            "dynamicPickListSelection": {
              "flow_id": "Callable - Slack Alerts For Sev1"
            },
            "toggleCfg": {
            },
            "input": {
              "flow_id": {
                "zip_name": "salesforce/callable/callable_slack_alerts_for_salesforce_sev1_cases.recipe.json",
                "name": "Callable - Slack Alerts For Salesforce Sev1 Cases",
                "folder": "salesforce/callable"
              },
              "request": {
                "channels": "#sev1-red-team,#sev1-blue-team,#sev1-green-team,#sev1-yellow-team,#sev1-pink-team",
                "case_id": "#{_('data.salesforce.599982ea.Id')}"
              }
            },
            "extended_input_schema": [
              {
                "type": "object",
                "name": "request",
                "label": "Recipe input",
                "properties": [
                  {
                    "control_type": "text",
                    "label": "Channels",
                    "name": "channels",
                    "type": "string",
                    "optional": false,
                    "parent": "request"
                  },
                  {
                    "control_type": "text",
                    "label": "Case ID",
                    "name": "case_id",
                    "type": "string",
                    "optional": false,
                    "parent": "request"
                  }
                ]
              }
            ],
            "uuid": "6038b16e-6afc-4fe3-81c2-ea569603e029"
          }
        ],
        "uuid": "2fbe4e3e-b958-47ac-ae8b-4ae26d0d5675"
      },
      {
        "number": 3,
        "keyword": "if",
        "dynamicPickListSelection": {
        },
        "toggleCfg": {
        },
        "input": {
          "type": "compound",
          "operand": "or",
          "conditions": [
            {
              "operand": "contains",
              "lhs": "=lookup(\"SALESFORCE_VARIABLES\", key: \"case.sev1.products\")[\"value\"].split(\";\")[1]",
              "rhs": "#{_('data.salesforce.599982ea.Product__c')}"
            }
          ]
        },
        "block": [
          {
            "number": 4,
            "provider": "workato_service",
            "name": "call_service_async",
            "as": "5cb40857",
            "title": null,
            "description": "Call recipe <span class=\"provider\">Callable - Slack Alerts For Salesforce Sev1 Cases</span> (do not wait for response)",
            "keyword": "action",
            "dynamicPickListSelection": {
              "flow_id": "Callable - Slack Alerts For Sev1"
            },
            "toggleCfg": {
            },
            "input": {
              "flow_id": {
                "zip_name": "salesforce/callable/callable_slack_alerts_for_salesforce_sev1_cases.recipe.json",
                "name": "Callable - Slack Alerts For Salesforce Sev1 Cases",
                "folder": "salesforce/callable"
              },
              "request": {
                "channels": "#magtron",
                "case_id": "#{_('data.salesforce.599982ea.Id')}"
              }
            },
            "extended_input_schema": [
              {
                "type": "object",
                "name": "request",
                "label": "Recipe input",
                "properties": [
                  {
                    "control_type": "text",
                    "label": "Channels",
                    "name": "channels",
                    "type": "string",
                    "optional": false
                  },
                  {
                    "control_type": "text",
                    "label": "Case ID",
                    "name": "case_id",
                    "type": "string",
                    "optional": false
                  }
                ]
              }
            ],
            "uuid": "c5a0ae97-5dea-47d0-8e11-5e540b9c356b"
          }
        ],
        "uuid": "b4b147da-1582-4ca4-ba68-cbd7e675ecf4"
      },
      {
        "number": 5,
        "provider": "workato_service",
        "name": "call_service_async",
        "as": "441c7275",
        "title": null,
        "description": "Call recipe <span class=\"provider\">Callable - Slack Alerts For Salesforce Sev1 Cases</span> (do not wait for response)",
        "keyword": "action",
        "dynamicPickListSelection": {
          "flow_id": "Callable - Slack Alerts For Sev1"
        },
        "toggleCfg": {
        },
        "input": {
          "flow_id": {
            "zip_name": "salesforce/callable/callable_slack_alerts_for_salesforce_sev1_cases.recipe.json",
            "name": "Callable - Slack Alerts For Salesforce Sev1 Cases",
            "folder": "salesforce/callable"
          },
          "request": {
            "channels": "#apac-support,#support-oncall,#loki",
            "case_id": "#{_('data.salesforce.599982ea.Id')}"
          }
        },
        "extended_input_schema": [
          {
            "type": "object",
            "name": "request",
            "label": "Recipe input",
            "properties": [
              {
                "control_type": "text",
                "label": "Channels",
                "name": "channels",
                "type": "string",
                "optional": false
              },
              {
                "control_type": "text",
                "label": "Case ID",
                "name": "case_id",
                "type": "string",
                "optional": false
              }
            ]
          }
        ],
        "uuid": "372dda7c-15ab-4538-a38f-824518c31650"
      }
    ],
    "job_report_schema": [
      {
        "name": "custom_column_1",
        "label": "Case ID"
      },
      {
        "name": "custom_column_2",
        "label": "Case Number"
      },
      {
        "name": "custom_column_3",
        "label": "Severity"
      },
      {
        "name": "custom_column_4",
        "label": "Product"
      }
    ],
    "job_report_config": {
      "custom_column_1": "#{_('data.salesforce.599982ea.Id')}",
      "custom_column_2": "#{_('data.salesforce.599982ea.CaseNumber')}",
      "custom_column_3": "#{_('data.salesforce.599982ea.Priority')}",
      "custom_column_4": "#{_('data.salesforce.599982ea.Product__c')}"
    },
    "uuid": "4f4c3a80-ccd1-470b-ba5c-1d1cd1532833"
  },
  "config": [
    {
      "keyword": "application",
      "provider": "salesforce",
      "skip_validation": false,
      "account_id": {
        "zip_name": "connections/salesforce.connection.json",
        "name": "Salesforce",
        "folder": "connections"
      }
    },
    {
      "keyword": "application",
      "provider": "workato_service",
      "skip_validation": false,
      "account_id": null
    }
  ]
}