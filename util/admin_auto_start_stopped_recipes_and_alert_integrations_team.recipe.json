{
  "name": "Admin | Auto-Start Stopped Recipes and Alert Integrations Team",
  "description": "When there is a trigger event, do action",
  "version": 28,
  "private": true,
  "concurrency": 1,
  "code": {
    "number": 0,
    "provider": "workato_app",
    "name": "stop_error",
    "as": "stop_error",
    "title": null,
    "description": null,
    "keyword": "trigger",
    "dynamicPickListSelection": {
    },
    "toggleCfg": {
    },
    "input": {
      "mode": "all"
    },
    "visible_config_fields": [
      "mode",
      "recipe_id"
    ],
    "block": [
      {
        "number": 1,
        "provider": "lookup_table",
        "name": "get_entries",
        "as": "abb96f42",
        "title": null,
        "description": "\n      Get all\n      <span class=\"provider\">entries</span>\n      from\n      <span class=\"provider\">REVENUE_IMPACTING_RECIPES</span>\n      lookup table\n    ",
        "keyword": "action",
        "dynamicPickListSelection": {
          "lookup_table_id": "REVENUE_IMPACTING_RECIPES"
        },
        "toggleCfg": {
        },
        "input": {
          "lookup_table_id": {
            "zip_name": "revenue_impacting_recipes.lookup_table.json",
            "name": "REVENUE_IMPACTING_RECIPES",
            "folder": ""
          }
        },
        "extended_output_schema": [
          {
            "type": "array",
            "name": "entries",
            "label": "Entries",
            "of": "object",
            "properties": [
              {
                "control_type": "number",
                "label": "Entry ID",
                "parse_output": "integer_conversion",
                "type": "integer",
                "name": "id"
              },
              {
                "properties": [
                  {
                    "control_type": "text",
                    "label": "Name",
                    "name": "col1",
                    "sticky": true,
                    "type": "string"
                  },
                  {
                    "control_type": "text",
                    "label": " recipe ID",
                    "name": "col2",
                    "sticky": true,
                    "type": "string"
                  },
                  {
                    "control_type": "text",
                    "label": "Select",
                    "name": "col3",
                    "sticky": true,
                    "type": "string"
                  }
                ],
                "label": "Entry",
                "type": "object",
                "name": "entry"
              }
            ]
          }
        ],
        "uuid": "7d9f794a-a8f9-4099-84a3-0ae493e0afd6"
      },
      {
        "number": 2,
        "as": "a5658ae1",
        "keyword": "foreach",
        "dynamicPickListSelection": {
        },
        "toggleCfg": {
        },
        "repeat_mode": "simple",
        "clear_scope": "false",
        "input": {
        },
        "block": [
          {
            "number": 3,
            "keyword": "if",
            "dynamicPickListSelection": {
            },
            "toggleCfg": {
            },
            "input": {
              "type": "compound",
              "operand": "and",
              "conditions": [
                {
                  "operand": "equals_to",
                  "lhs": "#{_('data.foreach.a5658ae1.entry.col2')}",
                  "rhs": "#{_('data.workato_app.stop_error.id')}",
                  "uuid": "condition-7ac3e766-a36b-4135-b384-ff75cab6ab10"
                }
              ]
            },
            "block": [
              {
                "number": 4,
                "provider": "workato_app",
                "name": "get_recipe",
                "as": "ef972c27",
                "keyword": "action",
                "dynamicPickListSelection": {
                },
                "toggleCfg": {
                  "recipe_id": false
                },
                "input": {
                  "recipe_id": "#{_('data.workato_app.stop_error.id')}"
                },
                "uuid": "7d40d1cd-0894-4af4-8f4d-bbb3badd19ec"
              },
              {
                "number": 5,
                "provider": "workato_app",
                "name": "start_recipe",
                "as": "start_recipe",
                "keyword": "action",
                "dynamicPickListSelection": {
                },
                "toggleCfg": {
                  "recipe_id": false
                },
                "input": {
                  "recipe_id": "#{_('data.workato_app.stop_error.id')}"
                },
                "uuid": "02496818-82d7-4f6e-bf4e-79fa7193f8d7"
              },
              {
                "number": 6,
                "provider": "slack_bot",
                "name": "post_bot_message",
                "as": "303c888f",
                "keyword": "action",
                "dynamicPickListSelection": {
                },
                "toggleCfg": {
                  "channel": true
                },
                "input": {
                  "channel": "#enterprise-automation-devs",
                  "text": "Rapid7 recipe #{_('data.workato_app.stop_error.id')} had stopped. It was restarted by RecipeOps",
                  "attachment_fields": [
                    {
                      "title": "Recipe Name",
                      "value": "#{_('data.workato_app.ef972c27.name')}"
                    },
                    {
                      "title": "Error Desc",
                      "value": "#{_('data.workato_app.stop_error.error.message')}"
                    },
                    {
                      "title": "Error",
                      "value": "#{_('data.workato_app.stop_error.error.error_id')}"
                    },
                    {
                      "title": "Error count",
                      "value": "#{_('data.workato_app.stop_error.error.error_count')}"
                    },
                    {
                      "title": "Poll Error",
                      "value": "#{_('data.workato_app.stop_error.error.is_poll_error')}"
                    },
                    {
                      "title": "Source",
                      "value": "#{_('data.workato_app.stop_error.error.error_connector')} | #{_('data.workato_app.stop_error.error.error_source')} | #{_('data.workato_app.stop_error.error.error_source_name')}"
                    },
                    {
                      "title": "Rate Limit error",
                      "value": "#{_('data.workato_app.stop_error.error.is_rate_limit_error')}"
                    },
                    {
                      "title": "Authorization error",
                      "value": "#{_('data.workato_app.stop_error.error.is_authorization_error')}"
                    }
                  ]
                },
                "visible_config_fields": [
                  "channel",
                  "blocks",
                  "blocks.block_type",
                  "blocks.section_text",
                  "blocks.image_url",
                  "blocks.alt_text",
                  "blocks.button_title",
                  "blocks.url",
                  "blocks.bot_command",
                  "blocks.params",
                  "blocks.style",
                  "blocks.attachment_fields",
                  "blocks.attachment_fields.value",
                  "blocks.placeholder_text",
                  "blocks.menu_type",
                  "blocks.dynamic_menu_recipe",
                  "blocks.field_name",
                  "blocks.options",
                  "blocks.options.title",
                  "blocks.options.bot_command",
                  "blocks.options.params",
                  "blocks.options.init_value",
                  "blocks.init_option",
                  "blocks.initial_date",
                  "blocks.options.value",
                  "blocks.init_options",
                  "blocks.image_title",
                  "blocks.external_id",
                  "blocks.elements",
                  "blocks.elements.type",
                  "blocks.elements.text",
                  "blocks.elements.image_url",
                  "blocks.elements.alt_text",
                  "blocks.actions",
                  "blocks.actions.type",
                  "blocks.actions.button_title",
                  "blocks.actions.url",
                  "blocks.actions.bot_command",
                  "blocks.actions.params",
                  "blocks.actions.style",
                  "blocks.actions.placeholder_text",
                  "blocks.actions.initial_date",
                  "blocks.actions.field_name",
                  "blocks.actions.options",
                  "blocks.actions.options.params",
                  "blocks.actions.menu_type",
                  "blocks.actions.dynamic_menu_recipe",
                  "blocks.objects",
                  "blocks.objects.blocks",
                  "blocks.objects.blocks.block_type",
                  "blocks.objects.blocks.section_text",
                  "blocks.objects.blocks.image_url",
                  "blocks.objects.blocks.alt_text",
                  "blocks.objects.blocks.button_title",
                  "blocks.objects.blocks.url",
                  "blocks.objects.blocks.bot_command",
                  "blocks.objects.blocks.params",
                  "blocks.objects.blocks.style",
                  "blocks.objects.blocks.attachment_fields",
                  "blocks.objects.blocks.attachment_fields.value",
                  "blocks.objects.blocks.placeholder_text",
                  "blocks.objects.blocks.menu_type",
                  "blocks.objects.blocks.dynamic_menu_recipe",
                  "blocks.objects.blocks.field_name",
                  "blocks.objects.blocks.options",
                  "blocks.objects.blocks.options.title",
                  "blocks.objects.blocks.options.bot_command",
                  "blocks.objects.blocks.options.params",
                  "blocks.objects.blocks.options.init_value",
                  "blocks.objects.blocks.init_option",
                  "blocks.objects.blocks.initial_date",
                  "blocks.objects.blocks.image_title",
                  "blocks.objects.blocks.elements",
                  "blocks.objects.blocks.elements.type",
                  "blocks.objects.blocks.elements.text",
                  "blocks.objects.blocks.elements.image_url",
                  "blocks.objects.blocks.elements.alt_text",
                  "blocks.objects.blocks.actions",
                  "blocks.objects.blocks.actions.type",
                  "blocks.objects.blocks.actions.button_title",
                  "blocks.objects.blocks.actions.url",
                  "blocks.objects.blocks.actions.bot_command",
                  "blocks.objects.blocks.actions.params",
                  "blocks.objects.blocks.actions.style",
                  "blocks.objects.blocks.actions.placeholder_text",
                  "blocks.objects.blocks.actions.initial_date",
                  "blocks.objects.blocks.actions.field_name",
                  "blocks.objects.blocks.actions.options",
                  "blocks.objects.blocks.actions.options.params",
                  "blocks.objects.blocks.actions.menu_type",
                  "blocks.objects.blocks.actions.dynamic_menu_recipe",
                  "text",
                  "message.title",
                  "message.title_link",
                  "message.attachment_text",
                  "message.color",
                  "attachment_fields",
                  "attachment_buttons",
                  "attachment_items.message.title",
                  "attachment_items.message.title_link",
                  "attachment_items.message.attachment_text",
                  "attachment_items.message.color",
                  "attachment_items.attachment_fields",
                  "attachment_items.attachment_buttons",
                  "advanced.ts",
                  "attachment_fields.title",
                  "attachment_fields.value"
                ],
                "uuid": "0bf15d3f-598b-4c76-ab72-e0f5ca73b93b"
              },
              {
                "number": 7,
                "provider": "sms",
                "name": "send_sms",
                "as": "send_sms",
                "keyword": "action",
                "dynamicPickListSelection": {
                },
                "toggleCfg": {
                },
                "input": {
                  "To": "315-395-9293",
                  "Body": "Rapid7 recipe #{_('data.workato_app.stop_error.id')} had stopped. It was restarted by RecipeOps"
                },
                "uuid": "3c1a0dff-39f6-45db-89e6-1f0f2ae50b93",
                "skip": false
              },
              {
                "number": 8,
                "provider": "email",
                "name": "send_mail",
                "as": "send_mail",
                "keyword": "action",
                "dynamicPickListSelection": {
                },
                "toggleCfg": {
                },
                "input": {
                  "email_type": "text",
                  "to": "priya_dodwad@rapid7.com,mike_flynn@rapid7.com,john_herson@rapid7.com,rasheed_alhassan@rapid7.com",
                  "subject": "Rapid7 recipe #{_('data.workato_app.stop_error.id')} had stopped. It was restarted by RecipeOps",
                  "body": "Source: #{_('data.workato_app.stop_error.error.error_connector')} | #{_('data.workato_app.stop_error.error.error_source')} | #{_('data.workato_app.stop_error.error.error_source_name')}\n\nError: #{_('data.workato_app.stop_error.error.error_id')}\nError count: #{_('data.workato_app.stop_error.error.error_count')}\n\nPoll Error: #{_('data.workato_app.stop_error.error.is_poll_error')}\nRate Limit error: #{_('data.workato_app.stop_error.error.is_rate_limit_error')}\nAuthorization error: #{_('data.workato_app.stop_error.error.is_authorization_error')}"
                },
                "visible_config_fields": [
                  "email_type"
                ],
                "uuid": "964199d2-d858-4a1f-bc84-f3fb125f05a4",
                "skip": true
              }
            ],
            "uuid": "472733a9-f553-4fe6-9d73-fd9e19376572"
          }
        ],
        "source": "#{_('data.lookup_table.abb96f42.entries')}",
        "uuid": "9d0078a5-7710-4333-9512-bcd03eca43be"
      },
      {
        "number": 9,
        "keyword": "if",
        "dynamicPickListSelection": {
        },
        "toggleCfg": {
        },
        "input": {
          "type": "compound",
          "operand": "and",
          "conditions": [
            {
              "operand": "equals_to",
              "lhs": "1",
              "rhs": "1",
              "uuid": "condition-893f4d45-13b1-4d29-98cd-aa36d281936e"
            }
          ]
        },
        "block": [
          {
            "number": 10,
            "provider": "workato_app",
            "name": "get_recipe",
            "as": "74d48a63",
            "keyword": "action",
            "dynamicPickListSelection": {
            },
            "toggleCfg": {
              "recipe_id": false
            },
            "input": {
              "recipe_id": "#{_('data.workato_app.stop_error.id')}"
            },
            "uuid": "b2384425-5c50-4aaa-922b-6e0967de9f97"
          },
          {
            "number": 11,
            "provider": "slack_bot",
            "name": "post_bot_message",
            "as": "8616b4e4",
            "keyword": "action",
            "dynamicPickListSelection": {
            },
            "toggleCfg": {
              "channel": true
            },
            "input": {
              "channel": "@mboyles",
              "text": "Rapid7 recipe #{_('data.workato_app.stop_error.id')} had stopped.",
              "attachment_fields": [
                {
                  "title": "Recipe Name",
                  "value": "#{_('data.workato_app.ef972c27.name')}"
                },
                {
                  "title": "Error Desc",
                  "value": "#{_('data.workato_app.stop_error.error.message')}"
                },
                {
                  "title": "Error",
                  "value": "#{_('data.workato_app.stop_error.error.error_id')}"
                },
                {
                  "title": "Error count",
                  "value": "#{_('data.workato_app.stop_error.error.error_count')}"
                },
                {
                  "title": "Poll Error",
                  "value": "#{_('data.workato_app.stop_error.error.is_poll_error')}"
                },
                {
                  "title": "Source",
                  "value": "#{_('data.workato_app.stop_error.error.error_connector')} | #{_('data.workato_app.stop_error.error.error_source')} | #{_('data.workato_app.stop_error.error.error_source_name')}"
                },
                {
                  "title": "Rate Limit error",
                  "value": "#{_('data.workato_app.stop_error.error.is_rate_limit_error')}"
                },
                {
                  "title": "Authorization error",
                  "value": "#{_('data.workato_app.stop_error.error.is_authorization_error')}"
                }
              ]
            },
            "visible_config_fields": [
              "channel",
              "blocks",
              "blocks.block_type",
              "blocks.section_text",
              "blocks.image_url",
              "blocks.alt_text",
              "blocks.button_title",
              "blocks.url",
              "blocks.bot_command",
              "blocks.params",
              "blocks.style",
              "blocks.attachment_fields",
              "blocks.attachment_fields.value",
              "blocks.placeholder_text",
              "blocks.menu_type",
              "blocks.dynamic_menu_recipe",
              "blocks.field_name",
              "blocks.options",
              "blocks.options.title",
              "blocks.options.bot_command",
              "blocks.options.params",
              "blocks.options.init_value",
              "blocks.init_option",
              "blocks.initial_date",
              "blocks.options.value",
              "blocks.init_options",
              "blocks.image_title",
              "blocks.external_id",
              "blocks.elements",
              "blocks.elements.type",
              "blocks.elements.text",
              "blocks.elements.image_url",
              "blocks.elements.alt_text",
              "blocks.actions",
              "blocks.actions.type",
              "blocks.actions.button_title",
              "blocks.actions.url",
              "blocks.actions.bot_command",
              "blocks.actions.params",
              "blocks.actions.style",
              "blocks.actions.placeholder_text",
              "blocks.actions.initial_date",
              "blocks.actions.field_name",
              "blocks.actions.options",
              "blocks.actions.options.params",
              "blocks.actions.menu_type",
              "blocks.actions.dynamic_menu_recipe",
              "blocks.objects",
              "blocks.objects.blocks",
              "blocks.objects.blocks.block_type",
              "blocks.objects.blocks.section_text",
              "blocks.objects.blocks.image_url",
              "blocks.objects.blocks.alt_text",
              "blocks.objects.blocks.button_title",
              "blocks.objects.blocks.url",
              "blocks.objects.blocks.bot_command",
              "blocks.objects.blocks.params",
              "blocks.objects.blocks.style",
              "blocks.objects.blocks.attachment_fields",
              "blocks.objects.blocks.attachment_fields.value",
              "blocks.objects.blocks.placeholder_text",
              "blocks.objects.blocks.menu_type",
              "blocks.objects.blocks.dynamic_menu_recipe",
              "blocks.objects.blocks.field_name",
              "blocks.objects.blocks.options",
              "blocks.objects.blocks.options.title",
              "blocks.objects.blocks.options.bot_command",
              "blocks.objects.blocks.options.params",
              "blocks.objects.blocks.options.init_value",
              "blocks.objects.blocks.init_option",
              "blocks.objects.blocks.initial_date",
              "blocks.objects.blocks.image_title",
              "blocks.objects.blocks.elements",
              "blocks.objects.blocks.elements.type",
              "blocks.objects.blocks.elements.text",
              "blocks.objects.blocks.elements.image_url",
              "blocks.objects.blocks.elements.alt_text",
              "blocks.objects.blocks.actions",
              "blocks.objects.blocks.actions.type",
              "blocks.objects.blocks.actions.button_title",
              "blocks.objects.blocks.actions.url",
              "blocks.objects.blocks.actions.bot_command",
              "blocks.objects.blocks.actions.params",
              "blocks.objects.blocks.actions.style",
              "blocks.objects.blocks.actions.placeholder_text",
              "blocks.objects.blocks.actions.initial_date",
              "blocks.objects.blocks.actions.field_name",
              "blocks.objects.blocks.actions.options",
              "blocks.objects.blocks.actions.options.params",
              "blocks.objects.blocks.actions.menu_type",
              "blocks.objects.blocks.actions.dynamic_menu_recipe",
              "text",
              "message.title",
              "message.title_link",
              "message.attachment_text",
              "message.color",
              "attachment_fields",
              "attachment_buttons",
              "attachment_items.message.title",
              "attachment_items.message.title_link",
              "attachment_items.message.attachment_text",
              "attachment_items.message.color",
              "attachment_items.attachment_fields",
              "attachment_items.attachment_buttons",
              "advanced.ts",
              "attachment_fields.title",
              "attachment_fields.value"
            ],
            "uuid": "d9b95952-55c9-45f3-8168-39ff199681de"
          }
        ],
        "comment": "Send all stopped recipe to a member of the support team for monitoring",
        "uuid": "61b3fc6b-caf6-4cba-a926-684cc2389cec"
      },
      {
        "number": 12,
        "keyword": "if",
        "dynamicPickListSelection": {
        },
        "toggleCfg": {
        },
        "input": {
          "type": "compound",
          "operand": "or",
          "conditions": [
            {
              "operand": "equals_to",
              "lhs": "#{_('data.workato_app.stop_error.id')}",
              "rhs": "642332"
            },
            {
              "operand": "equals_to",
              "lhs": "#{_('data.workato_app.stop_error.id')}",
              "rhs": "642336"
            },
            {
              "operand": "equals_to",
              "lhs": "#{_('data.workato_app.stop_error.id')}",
              "rhs": "642335"
            },
            {
              "operand": "equals_to",
              "lhs": "#{_('data.workato_app.stop_error.id')}",
              "rhs": "642333"
            },
            {
              "operand": "equals_to",
              "lhs": "#{_('data.workato_app.stop_error.id')}",
              "rhs": "642334"
            },
            {
              "operand": "equals_to",
              "lhs": "#{_('data.workato_app.stop_error.id')}",
              "rhs": "660541"
            },
            {
              "operand": "equals_to",
              "lhs": "#{_('data.workato_app.stop_error.id')}",
              "rhs": "645927"
            },
            {
              "operand": "equals_to",
              "lhs": "#{_('data.workato_app.stop_error.id')}",
              "rhs": "640982"
            },
            {
              "operand": "equals_to",
              "lhs": "#{_('data.workato_app.stop_error.id')}",
              "rhs": "661767"
            },
            {
              "operand": "equals_to",
              "lhs": "#{_('data.workato_app.stop_error.id')}",
              "rhs": "640983"
            }
          ]
        },
        "block": [

        ],
        "uuid": "51c8b6ee-8615-4f33-9c61-ab54f23b9dc6",
        "skip": true
      }
    ],
    "uuid": "b35ad907-68bb-4564-b06d-8ebb19ba05fb"
  },
  "config": [
    {
      "keyword": "application",
      "provider": "workato_app",
      "account_id": {
        "zip_name": "resources/recipeops.connection.json",
        "name": "RecipeOps",
        "folder": "resources"
      },
      "skip_validation": false
    },
    {
      "keyword": "application",
      "provider": "email",
      "skip_validation": true,
      "account_id": null
    },
    {
      "keyword": "application",
      "provider": "sms",
      "skip_validation": false,
      "account_id": null
    },
    {
      "keyword": "application",
      "provider": "slack_bot",
      "account_id": {
        "zip_name": "connections/workatointegrations.connection.json",
        "name": "workatointegrations",
        "folder": "connections"
      },
      "skip_validation": false
    },
    {
      "keyword": "application",
      "provider": "lookup_table",
      "skip_validation": false,
      "account_id": null
    }
  ]
}