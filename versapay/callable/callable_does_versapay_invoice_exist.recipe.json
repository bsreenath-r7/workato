{
  "name": "Callable - Does VersaPay Invoice Exist?",
  "description": "When there is a trigger event, do action",
  "version": 1,
  "private": true,
  "concurrency": 5,
  "code": {
    "number": 0,
    "provider": "workato_service",
    "name": "receive_request",
    "as": "f329a0d7",
    "title": null,
    "description": "New <span class=\"provider\">call</span> for <span class=\"provider\">Does VersaPay Invoice Exist?</span>",
    "keyword": "trigger",
    "dynamicPickListSelection": {
    },
    "toggleCfg": {
    },
    "input": {
      "service_name": "Does VersaPay Invoice Exist?",
      "request_schema_json": "[{\"control_type\":\"text\",\"label\":\"VersaPay Invoice Identifier\",\"name\":\"versapay_invoice_identifier\",\"type\":\"string\",\"optional\":false}]",
      "reply_schema_json": "[{\"control_type\":\"checkbox\",\"label\":\"Invoice Exists\",\"render_input\":{},\"parse_output\":{},\"toggle_hint\":\"Select from option list\",\"toggle_field\":{\"label\":\"Customer Exists\",\"control_type\":\"text\",\"toggle_hint\":\"Use custom value\",\"name\":\"invoice_exists\",\"type\":\"boolean\",\"optional\":false},\"name\":\"invoice_exists\",\"type\":\"boolean\",\"optional\":false}]"
    },
    "extended_output_schema": [
      {
        "type": "object",
        "name": "request",
        "label": "Recipe input",
        "properties": [
          {
            "control_type": "text",
            "label": "VersaPay Invoice Identifier",
            "name": "versapay_invoice_identifier",
            "type": "string",
            "optional": false
          }
        ]
      }
    ],
    "block": [
      {
        "number": 1,
        "keyword": "try",
        "dynamicPickListSelection": {
        },
        "toggleCfg": {
        },
        "input": {
        },
        "block": [
          {
            "number": 2,
            "provider": "versa_pay_arc_connector_36450_1556732749",
            "name": "view_invoice",
            "as": "ba306cc8",
            "keyword": "action",
            "dynamicPickListSelection": {
            },
            "toggleCfg": {
            },
            "input": {
              "number_or_id": "#{_('data.workato_service.f329a0d7.request.versapay_invoice_identifier')}"
            },
            "uuid": "400d8bbc-44ab-45c0-a37a-cfb1a52c7a3b"
          },
          {
            "number": 3,
            "provider": "workato_service",
            "name": "send_reply",
            "as": "dffc82af",
            "title": null,
            "description": "Return <span class=\"provider\">response</span> from <span class=\"provider\">Does VersaPay Invoice Exist?</span>",
            "keyword": "action",
            "dynamicPickListSelection": {
            },
            "toggleCfg": {
              "reply.invoice_exists": true
            },
            "input": {
              "reply_type": "success",
              "reply": {
                "invoice_exists": "true"
              }
            },
            "extended_input_schema": [
              {
                "type": "object",
                "name": "reply",
                "label": "Reply",
                "properties": [
                  {
                    "control_type": "checkbox",
                    "label": "Invoice Exists",
                    "render_input": {
                    },
                    "parse_output": {
                    },
                    "toggle_hint": "Select from option list",
                    "toggle_field": {
                      "label": "Customer Exists",
                      "control_type": "text",
                      "toggle_hint": "Use custom value",
                      "name": "invoice_exists",
                      "type": "boolean",
                      "optional": false,
                      "parent": "reply"
                    },
                    "name": "invoice_exists",
                    "type": "boolean",
                    "optional": false,
                    "parent": "reply"
                  }
                ]
              }
            ],
            "uuid": "285c0adc-dc7c-470d-bb83-5e33ddd8b3d7"
          },
          {
            "number": 4,
            "as": "f1a411fa",
            "keyword": "catch",
            "dynamicPickListSelection": {
            },
            "toggleCfg": {
            },
            "input": {
              "max_retry_count": "3",
              "retry_interval": "5"
            },
            "filter": {
              "conditions": [
                {
                  "operand": "not_starts_with",
                  "lhs": "#{_('data.catch.f1a411fa.message')}",
                  "rhs": "404 Not Found"
                }
              ],
              "operand": "and",
              "type": "compound"
            },
            "block": [
              {
                "number": 5,
                "keyword": "if",
                "dynamicPickListSelection": {
                },
                "toggleCfg": {
                },
                "input": {
                  "type": "compound",
                  "operand": "and",
                  "conditions": [
                    {
                      "operand": "starts_with",
                      "lhs": "#{_('data.catch.f1a411fa.message')}",
                      "rhs": "404 Not Found"
                    }
                  ]
                },
                "block": [
                  {
                    "number": 6,
                    "provider": "workato_service",
                    "name": "send_reply",
                    "as": "6a4ff8b0",
                    "title": null,
                    "description": "Return <span class=\"provider\">response</span> from <span class=\"provider\">Does VersaPay Invoice Exist?</span>",
                    "keyword": "action",
                    "dynamicPickListSelection": {
                    },
                    "toggleCfg": {
                      "reply.invoice_exists": true
                    },
                    "input": {
                      "reply_type": "success",
                      "reply": {
                        "invoice_exists": "false"
                      }
                    },
                    "extended_input_schema": [
                      {
                        "type": "object",
                        "name": "reply",
                        "label": "Reply",
                        "properties": [
                          {
                            "control_type": "checkbox",
                            "label": "Invoice Exists",
                            "render_input": {
                            },
                            "parse_output": {
                            },
                            "toggle_hint": "Select from option list",
                            "toggle_field": {
                              "label": "Customer Exists",
                              "control_type": "text",
                              "toggle_hint": "Use custom value",
                              "name": "invoice_exists",
                              "type": "boolean",
                              "optional": false,
                              "parent": "reply"
                            },
                            "name": "invoice_exists",
                            "type": "boolean",
                            "optional": false,
                            "parent": "reply"
                          }
                        ]
                      }
                    ],
                    "uuid": "af7ef2da-1f7b-49c2-a558-a0b42e0e338c"
                  },
                  {
                    "number": 7,
                    "keyword": "else",
                    "dynamicPickListSelection": {
                    },
                    "toggleCfg": {
                    },
                    "input": {
                    },
                    "block": [
                      {
                        "number": 8,
                        "provider": "workato_service",
                        "name": "send_reply",
                        "as": "e2280301",
                        "title": null,
                        "description": "Return <span class=\"provider\">response</span> from <span class=\"provider\">Does VersaPay Invoice Exist?</span>",
                        "keyword": "action",
                        "dynamicPickListSelection": {
                        },
                        "toggleCfg": {
                        },
                        "input": {
                          "reply_type": "error",
                          "message": "#{_('data.catch.f1a411fa.message')}"
                        },
                        "extended_input_schema": [
                          {
                            "type": "string",
                            "name": "message",
                            "control_type": "text",
                            "label": "Message",
                            "hint": "Error message"
                          },
                          {
                            "type": "string",
                            "name": "code",
                            "control_type": "text",
                            "label": "Error code",
                            "hint": "Use this field to set custom HTTP error code for service replies. E.g: 404/422 etc. This field is applicable to REST service recipes.",
                            "optional": true
                          },
                          {
                            "type": "boolean",
                            "name": "custom_error_response",
                            "control_type": "checkbox",
                            "label": "Custom error response?",
                            "hint": "By default, Workato sends 'reply_type' and 'message' fields in response. When set to 'Yes', the content of the 'Message' field is sent as response body. This field is applicable to REST service recipes.",
                            "optional": true,
                            "toggle_hint": "Select from option list",
                            "toggle_field": {
                              "label": "Custom error response?",
                              "control_type": "text",
                              "toggle_hint": "Use custom value",
                              "optional": true,
                              "hint": "By default, Workato sends 'reply_type' and 'message' fields in response. When set to 'Yes', the content of the 'Message' field is sent as response body. This field is applicable to REST service recipes.",
                              "type": "boolean",
                              "name": "custom_error_response"
                            },
                            "render_input": {
                            },
                            "parse_output": {
                            }
                          }
                        ],
                        "visible_config_fields": [
                          "reply_type"
                        ],
                        "uuid": "77931e2b-64b8-4c8b-8198-249b4397779d"
                      },
                      {
                        "number": 9,
                        "keyword": "stop",
                        "dynamicPickListSelection": {
                        },
                        "toggleCfg": {
                        },
                        "input": {
                          "stop_with_error": "true",
                          "stop_reason": "#{_('data.catch.f1a411fa.message')}"
                        },
                        "uuid": "c4a657a4-0251-420c-90be-a676b44e4e57"
                      }
                    ],
                    "comment": "ERROR! Pass error back to calling recipe",
                    "uuid": "190d97f4-4639-4fb4-905d-22fb7f4686d8"
                  }
                ],
                "comment": "Invoice does not exist, return false",
                "uuid": "748f0501-f1b6-40c1-acbc-38693e7bb2a8"
              }
            ],
            "uuid": "ebae73be-2cbb-42a4-b9ee-0095141c680e"
          }
        ],
        "uuid": "e907602b-e699-4a0a-bad9-21af45a2b8d4"
      }
    ],
    "job_report_schema": [
      {
        "name": "custom_column_1",
        "label": "VersaPay Invoice"
      },
      {
        "name": "custom_column_2",
        "label": "Exists?"
      }
    ],
    "job_report_config": {
      "custom_column_1": "#{_('data.workato_service.f329a0d7.request.versapay_invoice_identifier')}",
      "custom_column_2": "=_('data.versa_pay_arc_connector_36450_1556732749.ba306cc8.number').present? ? \"True\" : \"False\""
    },
    "uuid": "7587a7ab-2bae-43c6-a884-85ca14392190"
  },
  "config": [
    {
      "keyword": "application",
      "provider": "workato_service",
      "account_id": null
    },
    {
      "keyword": "application",
      "provider": "versa_pay_arc_connector_36450_1556732749",
      "account_id": {
        "zip_name": "resources/versapay_arc.connection.json",
        "name": "VersaPay ARC",
        "folder": "resources",
        "custom": true
      }
    }
  ]
}