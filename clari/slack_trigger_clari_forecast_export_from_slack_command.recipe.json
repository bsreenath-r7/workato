{
  "name": "Slack - Trigger Clari forecast export from slack command",
  "description": "When there is a new command to Slack Workbot, do action and other actions",
  "version": 1,
  "private": true,
  "concurrency": 1,
  "code": {
    "number": 0,
    "provider": "slack_bot",
    "name": "bot_command_v2",
    "as": "8b34a4c5",
    "title": null,
    "description": "New <span class=\"provider\">Clari create Report</span> command to <span class=\"provider\">Slack Workbot</span>",
    "keyword": "trigger",
    "dynamicPickListSelection": {
    },
    "toggleCfg": {
      "domain": false,
      "name": true,
      "scope": false
    },
    "input": {
      "allow_dialog": "true",
      "domain": "Clari",
      "name": "create",
      "scope": "Report"
    },
    "extended_output_schema": [
      {
        "type": "object",
        "name": "parameters",
        "label": "Parameters",
        "properties": [

        ]
      }
    ],
    "block": [
      {
        "number": 1,
        "provider": "lookup_table",
        "name": "search_entries",
        "as": "f5f7c6f3",
        "title": null,
        "description": "\n      Search\n      <span class=\"provider\">entries</span>\n      in\n      <span class=\"provider\">MISCELLANEOUS</span>\n      lookup table\n    ",
        "keyword": "action",
        "dynamicPickListSelection": {
          "lookup_table_id": "MISCELLANEOUS"
        },
        "toggleCfg": {
        },
        "input": {
          "lookup_table_id": {
            "zip_name": "global_variables.lookup_table.json",
            "name": "GLOBAL_VARIABLES",
            "folder": ""
          },
          "parameters": {
            "col1": "forecast.report",
            "col3": "Clari",
            "col4": "1"
          }
        },
        "extended_output_schema": [
          {
            "type": "array",
            "name": "entries",
            "label": "Entries",
            "of": "object",
            "properties": [
              {
                "control_type": "number",
                "label": "Entry ID",
                "parse_output": "integer_conversion",
                "type": "integer",
                "name": "id"
              },
              {
                "properties": [
                  {
                    "control_type": "text",
                    "label": "key",
                    "name": "col1",
                    "type": "string",
                    "sticky": true
                  },
                  {
                    "control_type": "text",
                    "label": "value",
                    "name": "col2",
                    "type": "string",
                    "sticky": true
                  },
                  {
                    "control_type": "text",
                    "label": "app",
                    "name": "col3",
                    "type": "string",
                    "sticky": true
                  },
                  {
                    "control_type": "text",
                    "label": "select",
                    "name": "col4",
                    "type": "string",
                    "sticky": true
                  },
                  {
                    "control_type": "text",
                    "label": "notes",
                    "name": "col5",
                    "type": "string",
                    "sticky": true
                  }
                ],
                "label": "Entry",
                "type": "object",
                "name": "entry"
              }
            ]
          }
        ],
        "extended_input_schema": [
          {
            "type": "object",
            "name": "parameters",
            "label": "Search by",
            "hint": "Provide one or more entry fields to search the entry",
            "properties": [
              {
                "control_type": "text",
                "label": "key",
                "name": "col1",
                "type": "string",
                "sticky": true,
                "optional": true
              },
              {
                "control_type": "text",
                "label": "value",
                "name": "col2",
                "type": "string",
                "sticky": true,
                "optional": true
              },
              {
                "control_type": "text",
                "label": "app",
                "name": "col3",
                "type": "string",
                "sticky": true,
                "optional": true
              },
              {
                "control_type": "text",
                "label": "select",
                "name": "col4",
                "type": "string",
                "sticky": true,
                "optional": true
              },
              {
                "control_type": "text",
                "label": "notes",
                "name": "col5",
                "type": "string",
                "sticky": true,
                "optional": true
              }
            ]
          }
        ],
        "comment": "Configure what actions Workbot should do after receiving commands from the user in Slack",
        "uuid": "3634e3f5-aa04-403c-a546-d1f11a0a1a78"
      },
      {
        "number": 2,
        "as": "7b479f7e",
        "keyword": "foreach",
        "dynamicPickListSelection": {
        },
        "toggleCfg": {
        },
        "repeat_mode": "simple",
        "clear_scope": "false",
        "input": {
        },
        "block": [
          {
            "number": 3,
            "provider": "workato_service",
            "name": "call_service_async",
            "as": "adc1be94",
            "title": null,
            "description": "Call recipe <span class=\"provider\">Callable - Retrieve Clari export data</span> (do not wait for response)",
            "keyword": "action",
            "dynamicPickListSelection": {
              "flow_id": "Callable - Retrieve Clari export data"
            },
            "toggleCfg": {
            },
            "input": {
              "flow_id": {
                "zip_name": "clari/callable/callable_retrieve_clari_export_data.recipe.json",
                "name": "Callable - Retrieve Clari export data",
                "folder": "clari/callable"
              },
              "request": {
                "reportName": "#{_('data.foreach.7b479f7e.entry.col2')}"
              }
            },
            "extended_input_schema": [
              {
                "type": "object",
                "name": "request",
                "label": "Recipe input",
                "properties": [
                  {
                    "control_type": "text",
                    "label": "Report name",
                    "name": "reportName",
                    "type": "string",
                    "optional": false
                  }
                ]
              }
            ],
            "uuid": "3f252a4f-29f9-4b8f-b30a-a485b8ded08b"
          }
        ],
        "source": "#{_('data.lookup_table.f5f7c6f3.entries')}",
        "uuid": "63067255-49c7-46dd-826b-707b6b0bc882"
      },
      {
        "number": 4,
        "provider": "slack_bot",
        "name": "post_bot_reply_v2",
        "as": "f831c3d0",
        "keyword": "action",
        "dynamicPickListSelection": {
        },
        "toggleCfg": {
        },
        "input": {
          "text": "Clari forecast report is being exported to Snowflake"
        },
        "comment": "Decide how Workbot should respond to the user after the above actions have been performed",
        "uuid": "9a6790b4-00df-4e6e-b443-27fb0a7ceab3",
        "extended_output_schema": null,
        "extended_input_schema": null
      }
    ],
    "comment": "Define how users should command Workbot from Slack",
    "uuid": "c9da25a6-0434-4974-935a-ebf2852c801e",
    "extended_input_schema": null
  },
  "config": [
    {
      "keyword": "application",
      "provider": "slack_bot",
      "skip_validation": false,
      "account_id": {
        "zip_name": "connections/workatointegrations.connection.json",
        "name": "workatointegrations",
        "folder": "connections"
      }
    },
    {
      "keyword": "application",
      "provider": "lookup_table",
      "skip_validation": false,
      "account_id": null
    },
    {
      "keyword": "application",
      "provider": "workato_service",
      "skip_validation": false,
      "account_id": null
    }
  ]
}